<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì‚¬ì£¼ ê²°ê³¼</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <!-- âœ… html2canvas ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Noto Sans KR', sans-serif;
        background: linear-gradient(to right, #fefcea, #f1da36);
        color: #333;
      }

      .container {
        max-width: 900px;
        margin: 40px auto;
        background: white;
        border-radius: 16px;
        padding: 30px 40px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        color: #d35400;
        margin-bottom: 20px;
      }

      h2 {
        border-left: 5px solid #f39c12;
        padding-left: 12px;
        margin-top: 40px;
        color: #2c3e50;
      }

      p {
        line-height: 1.8;
        font-size: 16px;
        margin: 12px 0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 15px;
      }

      th,
      td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
      }

      th {
        background: #f8e5b7;
      }

      pre {
        background: #f6f8fa;
        padding: 10px;
        white-space: pre-wrap;
        border-radius: 8px;
      }

      .section {
        margin-bottom: 32px;
      }

      .footer {
        text-align: center;
        color: #999;
        font-size: 14px;
        margin-top: 50px;
      }

      .download-button {
        display: block;
        margin: 0 auto 20px;
        padding: 10px 20px;
        background: #f39c12;
        color: white;
        font-weight: bold;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ”® ë‹¹ì‹ ì˜ ì‚¬ì£¼ ê²°ê³¼</h1>

      <!-- âœ… ì´ë¯¸ì§€ ì €ì¥ ë²„íŠ¼ -->
      <button class="download-button" onclick="saveAsImage()">
        ğŸ“¸ ì´ë¯¸ì§€ë¡œ ì €ì¥
      </button>

      <div class="section" id="output">
        ìš´ì„¸ë°•ì‚¬ ë¯¼ì¬ë™ìë¡œë¶€í„° ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...
      </div>

      <div class="footer">â“’ 2025 ìš´ì„¸ë°•ì‚¬ ë¯¼ì¬ë™ì ë¦¬í¬íŠ¸</div>
    </div>

    <!-- âœ… marked.js for Markdown to HTML -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
      const OPENAI_API_KEY =
        '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';

      const userInput = {
        name: 'ê¹€ë¯¼ì¬',
        birth: '2000ë…„ 5ì›” 12ì¼',
        calendar: 'ì–‘ë ¥',
        gender: 'ë‚¨ì',
        hour: 'ëª¨ë¦„',
        today: new Date().toLocaleDateString('ko-KR'),
      };

      const prompt = `
ë‹¹ì‹ ì€ ì „í†µ ëª…ë¦¬í•™ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì•„ë˜ í˜•ì‹ì— ë§ì¶° 'ìš´ì„¸ë°•ì‚¬' ìŠ¤íƒ€ì¼ë¡œ ì˜¤ëŠ˜ì˜ ì‚¬ì£¼ ìš´ì„¸ ì „ì²´ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

â€» ê° í•­ëª©ì˜ ë‹µë³€ì€ **ìµœì†Œ 3ì¤„ ì´ìƒ** ìƒì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”.
â€» ì˜¤í–‰ ë¶„ì„ì€ **ì²œê°„Â·ì§€ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê° ì˜¤í–‰(ëª©, í™”, í† , ê¸ˆ, ìˆ˜)ì˜ ê°œìˆ˜ë¥¼ ëª…í™•í•˜ê²Œ ìˆ˜ì¹˜ë¡œ ê³„ì‚°**í•œ ë’¤ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤.
â€» **ìˆ˜ê°€ ì—†ìœ¼ë©´ ë°˜ë“œì‹œ "ìˆ˜ê¸°ìš´ì´ ë¶€ì¡±í•˜ë‹¤"**ê³  ëª…ì‹œí•˜ê³ , ì„±ê²©/ê±´ê°•/ëŒ€ì¸ê´€ê³„ì— ì–´ë–¤ ì˜í–¥ì´ ìˆëŠ”ì§€ ì„¤ëª…í•˜ì„¸ìš”.
â€» â€˜ê· í˜• ì¡í˜â€™ ê°™ì€ ëª¨í˜¸í•œ í‘œí˜„ì„ ì‚¬ìš©í•˜ì§€ ë§ê³ , ê° ì˜¤í–‰ì˜ ê°•ì•½ê³¼ ë¹„ìœ¨ì„ êµ¬ì²´ì ìœ¼ë¡œ ì–¸ê¸‰í•˜ì„¸ìš”.

ì‚¬ìš©ì ì…ë ¥ ì •ë³´:
- ìƒë…„ì›”ì¼: ${userInput.birth}
- ì–‘ë ¥/ìŒë ¥ ì—¬ë¶€: ${userInput.calendar}
- ì„±ë³„: ${userInput.gender}
- íƒœì–´ë‚œ ì‹œê°„: ${userInput.hour} (â€» ì‹œê°„ì´ ì—†ìœ¼ë©´ 'ì‚¼ì£¼'ë¡œ í•´ì„)
- ì˜¤ëŠ˜ ë‚ ì§œ: ${userInput.today}

ì•„ë˜ ë¶„ì„ í˜•ì‹ì„ ë°˜ë“œì‹œ ë”°ë¥´ì„¸ìš”:

### ì‚¬ì£¼ ê¸°ë³¸ì •ë³´ ë° êµ¬ì„±

| êµ¬ë¶„ | ì²œê°„ | ì§€ì§€ |
|------|------|------|
| ë…„ì£¼ | ... | ... |
| ì›”ì£¼ | ... | ... |
| ì¼ì£¼ | ... | ... |
| ì‹œì£¼ | ... | ... |

â†’ ìœ„ í‘œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‚¬ì£¼ êµ¬ì„± ì„¤ëª…  
â†’ ì²œê°„ê³¼ ì§€ì§€ë¥¼ **ì˜¤í–‰(ëª©Â·í™”Â·í† Â·ê¸ˆÂ·ìˆ˜)** ê¸°ì¤€ìœ¼ë¡œ ë³€í™˜í•œ ë’¤,  
â†’ ê° ì˜¤í–‰ì˜ ê°œìˆ˜ë¥¼ ì„¸ì–´ ë‹¤ìŒì²˜ëŸ¼ ì •ë¦¬í•´ ì£¼ì„¸ìš”:

- ëª©(æœ¨): ?ê°œ  
- í™”(ç«): ?ê°œ  
- í† (åœŸ): ?ê°œ  
- ê¸ˆ(é‡‘): ?ê°œ  
- ìˆ˜(æ°´): ?ê°œ  

â†’ ê° ì˜¤í–‰ì˜ **ë¹„ìœ¨ê³¼ ë¶€ì¡±/ê³¼ë‹¤ ì—¬ë¶€**, **ë¶ˆê· í˜• ì‹œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆëŠ” ì„±ê²©, ê±´ê°•, ìš´ì„¸ ë¬¸ì œ**ë¥¼ ìƒì„¸íˆ í•´ì„í•´ ì£¼ì„¸ìš”.

### íŒ”ì ê¸°ë³¸ ë¶„ì„
â†’ ì˜¤í–‰ì˜ ê· í˜•, ê°•ì•½, ìŒì–‘ ì„¤ëª…

### ëª…ë¦¬í•™ì  ë¶„ì„
#### ì„±ê²© íŠ¹ì„±
â†’ ì¼ê°„ ì¤‘ì‹¬ ì„±ê²© ë¶„ì„
#### ì‚¬ì—…
â†’ ì„±ê³µìš´/ì ì„±/íƒ€ì´ë°
#### ì¬ì‚°
â†’ ì¬ë¬¼ íë¦„, ëˆë³µ, ì¬ë¬¼ìš´
#### ê²°í˜¼
â†’ ë°°ìš°ì ìš´, ì¸ì—° ì‹œê¸°
#### ê±´ê°•
â†’ ì²´ì§ˆì  ì•½ì , ë³‘ ì¡°ì‹¬í•  ì‹œê¸°

### í–¥í›„ 1ë…„ ì˜ˆì¸¡
â†’ ì˜¬í•´~ë‚´ë…„ê¹Œì§€ 1ë…„ íë¦„

### ì˜¬í•´ì˜ˆì¸¡
â†’ ${new Date().getFullYear()}ë…„ ì „ì²´ í•´ì„

### í–¥í›„ 3~5ë…„ê°„ì˜ ë™í–¥ ë° ì˜ˆì¸¡

### í‰ìƒ ìš´ëª… ì˜ˆì¸¡

### ì¼ìƒì— ë‹¥ì¹  ì¬ë‚œ

### ì¸ìƒì—ì„œ ë§Œë‚˜ê²Œ ë  ë³µ

### ëª¸ì— ë‚˜ìœ ìŒì‹ / ì¢‹ì€ ìŒì‹

### ì¢‹ì€ ë°©í–¥ (ë™ì„œë‚¨ë¶)

### ì¢‹ì€ ìƒ‰ (ì˜¤í–‰ ê¸°ë°˜)

### ê¸¸í•œ ì¥ì†Œ (ê°•, ì‚°, ë°”ë‹¤, í‰ì•¼)

### ì¢…í•© ì˜ê²¬
`;

      async function fetchGPT() {
        const output = document.getElementById('output');
        try {
          const res = await fetch(
            'https://api.openai.com/v1/chat/completions',
            {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${OPENAI_API_KEY}`,
              },
              body: JSON.stringify({
                model: 'gpt-4o',
                messages: [{ role: 'user', content: prompt }],
                temperature: 0.8,
              }),
            }
          );

          const result = await res.json();
          const markdown = result.choices[0].message.content;
          output.innerHTML = marked.parse(markdown);
        } catch (e) {
          output.innerHTML = `<p>âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:<br>${e.message}</p>`;
        }
      }

      // âœ… ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ëŠ” í•¨ìˆ˜
      function saveAsImage() {
        const target = document.getElementById('output');
        html2canvas(target, {
          scale: 2,
          useCORS: true,
          backgroundColor: '#ffffff',
        }).then((canvas) => {
          const link = document.createElement('a');
          link.download = `ì‚¬ì£¼ê²°ê³¼_${userInput.name}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();
        });
      }

      fetchGPT();
    </script>
  </body>
</html>
